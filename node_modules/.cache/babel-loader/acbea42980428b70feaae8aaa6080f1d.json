{"ast":null,"code":"import _classCallCheck from \"/Users/sai04/Documents/Source/cmsaeroaja/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sai04/Documents/Source/cmsaeroaja/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sai04/Documents/Source/cmsaeroaja/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sai04/Documents/Source/cmsaeroaja/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sai04/Documents/Source/cmsaeroaja/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/sai04/Documents/Source/cmsaeroaja/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/sai04/Documents/Source/cmsaeroaja/src/pages/report/Component.js\";\nimport React from \"react\";\nimport { Row, Button } from \"reactstrap\";\nimport SubHeader from \"../../component/sub-header\";\nimport PaginationRemote from '../../component/PaginationRemote';\nimport { formatRupiah } from '../../utilities/helpers';\n\nvar DataUser =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(DataUser, _React$PureComponent);\n\n  function DataUser(props) {\n    var _this;\n\n    _classCallCheck(this, DataUser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DataUser).call(this, props));\n\n    _this.handleTableChange = function (type, _ref) {\n      var page = _ref.page,\n          sizePerPage = _ref.sizePerPage;\n      var params = _this.state.params;\n      params.page = page;\n      params.sizePerPage = sizePerPage;\n\n      _this.loadDataListReport(params.q, params.page, params.limit, params.limitPage);\n\n      _this.setState({\n        params: params\n      });\n    };\n\n    _this.indexList = 0;\n    _this.columns = [{\n      dataField: \"index\",\n      text: \"No\",\n      headerStyle: {\n        width: \"5%\"\n      }\n    }, {\n      dataField: \"booking_code\",\n      text: \"BOOKER\",\n      headerStyle: {\n        width: \"15%\"\n      }\n    }, {\n      dataField: \"year\",\n      text: \"YEAR\",\n      headerStyle: {\n        width: \"10%\"\n      }\n    }, {\n      dataField: \"date\",\n      text: \"TRX DATE\",\n      headerStyle: {\n        width: \"20%\"\n      }\n    }, {\n      dataField: \"customer_name\",\n      text: \"PASSANGER NAME\",\n      headerStyle: {\n        width: \"25%\"\n      }\n    }, {\n      dataField: \"total_amount\",\n      text: \"AMOUNT\",\n      headerStyle: {\n        width: \"25%\"\n      },\n      formatter: function formatter(id, row) {\n        return formatRupiah(!row ? 0 : !row.total_amount ? 0 : row.total_amount);\n      }\n    }, {\n      dataField: \"status\",\n      text: \"STATUS\",\n      headerStyle: {\n        width: \"10%\"\n      },\n      formatter: _this.renderStatusFlight.bind(_assertThisInitialized(_assertThisInitialized(_this)))\n    }];\n    _this.reloadDataReport = false;\n    _this.state = {\n      modalOrder: false,\n      search: \"\",\n      params: {\n        q: '',\n        page: 1,\n        limit: 20,\n        sizePerPage: 20,\n        totalSize: 200\n      },\n      selectDetail: null,\n      data: [],\n      mobile: false\n    };\n    return _this;\n  }\n\n  _createClass(DataUser, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.handleResetReportAction();\n      var _this$state$params = this.state.params,\n          q = _this$state$params.q,\n          page = _this$state$params.page,\n          limit = _this$state$params.limit;\n      this.loadDataListReport(q, page, limit);\n      this.downloadData();\n\n      if (window.screen.availWidth < 756) {\n        this.setState({\n          mobile: true\n        });\n      } else {\n        this.setState({\n          mobile: false\n        });\n      }\n    }\n  }, {\n    key: \"handleResetReportAction\",\n    value: function handleResetReportAction() {\n      var dispatch = this.props.dispatch;\n      var resetReportAction = this.props.actions.resetReportAction;\n      resetReportAction(dispatch);\n    }\n  }, {\n    key: \"loadDataListReport\",\n    value: function loadDataListReport(query, page, limit) {\n      var dispatch = this.props.dispatch;\n      var params = {\n        q: query,\n        page: page,\n        limit: limit\n      };\n      var reportAction = this.props.actions.reportAction; // let token = !this.props.login ? '' : this.login.token;\n\n      reportAction(dispatch, params);\n    }\n  }, {\n    key: \"handleInputSearch\",\n    value: function handleInputSearch(index) {\n      var data = this.state.data;\n      var setSearching = this.props.actionCommon.setSearching;\n      var dataPost = {\n        products: data[index].booking\n      };\n      setSearching(dataPost);\n    }\n  }, {\n    key: \"handleChangeSearch\",\n    value: function handleChangeSearch(value) {\n      var params = this.state.params;\n      params.q = value;\n      this.setState({\n        params: params\n      });\n      this.loadDataListReport(params.q, params.page, params.limit, params.limitPage);\n    }\n  }, {\n    key: \"downloadData\",\n    value: function downloadData() {\n      var dispatch = this.props.dispatch;\n      var params = {\n        q: '',\n        page: 1,\n        limit: !this.props.report.meta ? 20 : this.props.report.meta.total\n      };\n      var loadAllReport = this.props.actions.loadAllReport;\n      var token = !this.props.login.token ? '' : this.props.login.token;\n      loadAllReport(dispatch, params, token);\n    }\n  }, {\n    key: \"renderStatusFlight\",\n    value: function renderStatusFlight(id, row) {\n      return React.createElement(\"div\", {\n        className: (!row ? '' : !row.status ? '' : row.status).toLowerCase(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, !row ? '' : !row.status ? '' : row.status);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          params = _this$state.params,\n          mobile = _this$state.mobile;\n      var _this$props$report$me = this.props.report.meta,\n          meta = _this$props$report$me === void 0 ? {\n        total: 1\n      } : _this$props$report$me;\n      var fetchingListReport = this.props.report.fetchingListReport;\n      var dataListReport = this.props.report.dataListAllReport == null ? [] : this.props.report.dataListAllReport;\n      var filterData = dataListReport.filter(function (dataListReport) {\n        return dataListReport.status == \"PAID\";\n      });\n      var dataViewListReport = this.props.report.dataListReport == null ? [] : this.props.report.dataListReport;\n      var index = 0;\n      var no = 0;\n      dataViewListReport.map(function (obj, i) {\n        index++;\n        obj.index = params.page === 1 ? index : index + Number(params.page * params.sizePerPage) - 20;\n      });\n      filterData.map(function (obj, i) {\n        no++;\n        obj.index = no;\n      });\n      return React.createElement(\"div\", {\n        className: \"section-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"search-flight-heading bot\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \" Report \"), React.createElement(Row, {\n        className: \"step-form-table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(SubHeader, {\n        title: \"Report\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-search\",\n        style: mobile ? {\n          overflow: \"scroll\",\n          width: window.innerWidth - 20\n        } : {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(PaginationRemote, {\n        tableReport: true,\n        download: filterData == null ? false : true,\n        loading: fetchingListReport,\n        searchPlaceholder: \"Search in Here\",\n        handleChangeSearch: this.handleChangeSearch.bind(this),\n        searchValue: params.q,\n        dataexport: filterData,\n        data: dataViewListReport,\n        columns: this.columns,\n        page: params.page,\n        sizePerPage: params.sizePerPage,\n        totalSize: !meta ? 1 : meta.total,\n        onTableChange: this.handleTableChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return DataUser;\n}(React.PureComponent);\n\nexport { DataUser as default };","map":{"version":3,"sources":["/Users/sai04/Documents/Source/cmsaeroaja/src/pages/report/Component.js"],"names":["React","Row","Button","SubHeader","PaginationRemote","formatRupiah","DataUser","props","handleTableChange","type","page","sizePerPage","params","state","loadDataListReport","q","limit","limitPage","setState","indexList","columns","dataField","text","headerStyle","width","formatter","id","row","total_amount","renderStatusFlight","bind","reloadDataReport","modalOrder","search","totalSize","selectDetail","data","mobile","handleResetReportAction","downloadData","window","screen","availWidth","dispatch","resetReportAction","actions","query","reportAction","index","setSearching","actionCommon","dataPost","products","booking","value","report","meta","total","loadAllReport","token","login","status","toLowerCase","fetchingListReport","dataListReport","dataListAllReport","filterData","filter","dataViewListReport","no","map","obj","i","Number","overflow","innerWidth","handleChangeSearch","PureComponent"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Row, Button } from \"reactstrap\";\nimport SubHeader from \"../../component/sub-header\";\nimport PaginationRemote from '../../component/PaginationRemote'\nimport { formatRupiah } from '../../utilities/helpers';\n\nexport default class DataUser extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalOrder: false,\n      search: \"\",\n      params: {\n        q: '',\n        page: 1,\n        limit: 20,\n        sizePerPage: 20,\n        totalSize: 200\n      },\n      selectDetail:null,\n      data: [],\n      mobile: false\n    };\n  }\n\n  componentWillMount(){\n    this.handleResetReportAction();\n    const { q, page, limit }= this.state.params;\n    this.loadDataListReport(q, page, limit)\n    this.downloadData()\n    if (window.screen.availWidth < 756){\n      this.setState({mobile:true})\n    } else {\n      this.setState({mobile:false})\n    }\n  }\n\n  handleResetReportAction(){\n    const{ dispatch } = this.props;\n    const { resetReportAction } = this.props.actions;\n    resetReportAction(dispatch)\n  }\n  loadDataListReport(query, page, limit){\n    const { dispatch } = this.props;\n    let params = {\n      q: query,\n      page: page,\n      limit: limit,\n    }\n    const {reportAction} = this.props.actions;\n    // let token = !this.props.login ? '' : this.login.token;\n    reportAction(dispatch, params)\n  }\n  handleInputSearch(index) {\n    const { data } = this.state;\n    const { setSearching } = this.props.actionCommon\n    let dataPost = {\n      products: data[index].booking\n    }\n    setSearching(dataPost);\n  }\n  handleTableChange = (type, { page, sizePerPage }) => {\n    let { params }  = this.state;\n    params.page = page;\n    params.sizePerPage  = sizePerPage;\n    this.loadDataListReport(params.q, params.page, params.limit, params.limitPage)\n    this.setState({params:params});\n  }\n  handleChangeSearch(value){\n    let { params }  = this.state\n    params.q        = value\n    this.setState({params});\n    this.loadDataListReport(params.q, params.page, params.limit, params.limitPage)\n  }\n  downloadData() {\n    const { dispatch }  = this.props;\n    let params = {\n      q: '',\n      page: 1,\n      limit: !this.props.report.meta ? 20 :this.props.report.meta.total \n    }\n    const { loadAllReport } = this.props.actions;\n    let token = !this.props.login.token ? '' : this.props.login.token;\n    loadAllReport(dispatch,params, token);\n  }\n  renderStatusFlight(id, row){\n    return (\n      <div className={(!row ? '' : !row.status ? '' :row.status).toLowerCase()}>{!row ? '' : !row.status ? '' :row.status }</div>\n    );\n  }\n\n  indexList = 0;\n  columns   = [\n    { dataField: \"index\", text: \"No\", headerStyle: { width: \"5%\" } },\n    { dataField: \"booking_code\", text: \"BOOKER\", headerStyle: { width: \"15%\" } },\n    { dataField: \"year\", text: \"YEAR\", headerStyle: { width: \"10%\" } },\n    { dataField: \"date\", text: \"TRX DATE\", headerStyle: { width: \"20%\" }},\n    { dataField: \"customer_name\", text: \"PASSANGER NAME\", headerStyle: { width: \"25%\" }},\n    { dataField: \"total_amount\", text: \"AMOUNT\", headerStyle: { width: \"25%\" },formatter:(id, row)=> formatRupiah(!row ? 0 : !row.total_amount ? 0 : row.total_amount) },\n    { dataField: \"status\", text: \"STATUS\", headerStyle: { width: \"10%\" }, formatter:this.renderStatusFlight.bind(this)},\n  ]\n  reloadDataReport  = false;\n\n  render() {\n    const { params, mobile }  = this.state;\n    const { meta= {total:1} }  = this.props.report;\n    const { fetchingListReport } = this.props.report;\n    let dataListReport = this.props.report.dataListAllReport==null ? [] : this.props.report.dataListAllReport;\n    let filterData = dataListReport.filter(dataListReport => dataListReport.status == \"PAID\")\n    let dataViewListReport = this.props.report.dataListReport==null ? [] : this.props.report.dataListReport;\n    let index = 0;\n    let no=0;\n    dataViewListReport.map((obj, i)=>{\n      index++;\n      obj.index= params.page===1 ? index : index+Number(params.page*params.sizePerPage)-20;\n    })\n    filterData.map((obj, i)=> {\n      no++;\n      obj.index= no;\n    })\n    return (\n      <div className=\"section-search\">\n        <Row className=\"search-flight-heading bot\"> Report </Row>\n        <Row className=\"step-form-table\">\n          <div style={{ width: \"100%\" }}>\n            <SubHeader title={\"Report\"} />\n              <div className=\"form-search\" style={mobile ? {overflow:\"scroll\",width:window.innerWidth-20} : {}}>\n                <PaginationRemote tableReport={true}\n                  download={filterData==null ? false : true}\n                  loading={fetchingListReport}\n                  searchPlaceholder=\"Search in Here\"\n                  handleChangeSearch={this.handleChangeSearch.bind(this)}\n                  searchValue={params.q}\n                  dataexport= { filterData }\n                  data={ dataViewListReport }\n                  columns={this.columns}\n                  page={ params.page }\n                  sizePerPage={ params.sizePerPage }\n                  totalSize={ !meta ? 1 : meta.total }\n                  onTableChange={ this.handleTableChange }\n                />\n              </div>\n          </div>\n        </Row>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}