{"ast":null,"code":"import _slicedToArray from \"/Users/kitrihapsari/Documents/projects/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/kitrihapsari/Documents/projects/cmsasitaaja/src/pages/umrah/Edit.js\";\nimport React, { useState, useEffect } from 'react';\nimport './umrah.css';\nimport Field from './components/Field';\nimport FieldAdd from './components/FieldAdd';\nimport FieldTextEditor from './components/FieldTextEditor';\nimport TopImage from './components/TopImage';\nimport DocPicture from './components/DocPicture';\nimport moment from 'moment';\nimport Loading from '../../component/Loading';\nexport default (function (props) {\n  // Props\n  var onEdit = props.onEdit,\n      onClear = props.onClear,\n      dispatch = props.dispatch,\n      token = props.token,\n      isLoading = props.isLoading,\n      onMode = props.onMode,\n      data = props.data; // State\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      bh = _useState2[0],\n      setBh = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isTitle = _useState4[0],\n      setTitle = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isThumbnail = _useState6[0],\n      setThumbnail = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isCoT = _useState8[0],\n      setCoT = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isDuration = _useState10[0],\n      setDuration = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isQuota = _useState12[0],\n      setQuota = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isMinPax = _useState14[0],\n      setMinPax = _useState14[1];\n\n  var _useState15 = useState(''),\n      _useState16 = _slicedToArray(_useState15, 2),\n      isTerms = _useState16[0],\n      setTerms = _useState16[1];\n\n  var _useState17 = useState(''),\n      _useState18 = _slicedToArray(_useState17, 2),\n      isPolicy = _useState18[0],\n      setPolicy = _useState18[1];\n\n  var _useState19 = useState([{\n    startDate: moment(new Date()).add(7, 'days').format('YYYY-MM-DD'),\n    endDate: moment(new Date()).add(10, 'days').format('YYYY-MM-DD')\n  }]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      isTripDates = _useState20[0],\n      setTripDates = _useState20[1];\n\n  var _useState21 = useState([{\n    name: ''\n  }]),\n      _useState22 = _slicedToArray(_useState21, 2),\n      isVisited = _useState22[0],\n      setVisited = _useState22[1];\n\n  var _useState23 = useState([{\n    title: ''\n  }]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      isInclude = _useState24[0],\n      setInclude = _useState24[1];\n\n  var _useState25 = useState([{\n    title: ''\n  }]),\n      _useState26 = _slicedToArray(_useState25, 2),\n      isExclude = _useState26[0],\n      setExclude = _useState26[1];\n\n  var _useState27 = useState([{\n    day: 1,\n    title: \"\",\n    description: \"\",\n    facilities: []\n  }]),\n      _useState28 = _slicedToArray(_useState27, 2),\n      isItinerary = _useState28[0],\n      setItinerary = _useState28[1];\n\n  var _useState29 = useState([{\n    title: \"\",\n    image: \"\"\n  }, {\n    title: \"\",\n    image: \"\"\n  }, {\n    title: \"\",\n    image: \"\"\n  }, {\n    title: \"\",\n    image: \"\"\n  }, {\n    title: \"\",\n    image: \"\"\n  }]),\n      _useState30 = _slicedToArray(_useState29, 2),\n      isMedia = _useState30[0],\n      setMedia = _useState30[1];\n\n  var _useState31 = useState([{\n    adult_single: 0\n  }, {\n    adult_twin: 0\n  }, {\n    adult_triple: 0\n  }, {\n    adult_quad: 0\n  }, {\n    adult_double: 0\n  }]),\n      _useState32 = _slicedToArray(_useState31, 2),\n      isPriceConfig = _useState32[0],\n      setPriceConfig = _useState32[1];\n\n  var _useState33 = useState({\n    visa: 0,\n    full: 0,\n    none: 0\n  }),\n      _useState34 = _slicedToArray(_useState33, 2),\n      isAddOn = _useState34[0],\n      setAddOn = _useState34[1];\n\n  var _useState35 = useState([]),\n      _useState36 = _slicedToArray(_useState35, 2),\n      newMedia = _useState36[0],\n      setNew = _useState36[1];\n\n  var _useState37 = useState([]),\n      _useState38 = _slicedToArray(_useState37, 2),\n      deleteMedia = _useState38[0],\n      setDelete = _useState38[1]; // Lifecycle\n\n\n  useEffect(function () {\n    setTitle(data && data.title);\n    setThumbnail(data && data.image_thumbnail);\n    setCoT(data && data.cut_of_time);\n    setDuration(data && data.duration_days);\n    setQuota(data && data.tour_trip_dates[0].quota_person);\n    setMinPax(data && data.min_pax);\n    setTripDates(data && data.tour_trip_dates);\n    setVisited(data && data.visit_cities);\n    setInclude(data && data.info_included);\n    setExclude(data && data.info_excluded);\n    setItinerary(data && data.tour_itineraries);\n    setPriceConfig(data && data.price_config);\n    setAddOn(data && data.umrah_addons[0]);\n    setPriceConfig(data && data.price_config);\n    setTerms(data && data.terms_conditions[0]);\n    setPolicy(data && data.cancellation_policy[0]);\n    isMedia.map(function (item, i) {\n      item.title = data && data.media && data.media[i] ? data.media[i].title : '';\n      item.image = data && data.media && data.media[i] ? data.media[i].url : '';\n      return item;\n    });\n  }, [data]); // Function Add\n\n  var addThumbnail = function addThumbnail(value) {\n    setThumbnail(value);\n  }; // Function Change Text\n\n\n  var onChangeMedia = function onChangeMedia(value, field, i) {\n    if (field === 'image') {\n      if (value === '') {\n        newMedia.splice(i - 1, 1);\n        var del = [];\n\n        if (data.media && data.media[i] && data.media[i].id) {\n          del.push({\n            media_id: data.media[i].id\n          });\n          setDelete(deleteMedia.concat(del));\n        }\n      } else {\n        var add = [];\n        add.push({\n          title: '',\n          image: field === 'image' ? value : ''\n        });\n        setNew(newMedia.concat(add));\n      }\n    }\n\n    isMedia[i][field] = value; // newMedia[][field] = value;\n\n    setBh(new Date().getUTCMilliseconds());\n  }; // Function Submit\n  // Payloadnya disesuaikan dengan swagger/postman\n\n\n  var onSubmit = function onSubmit() {\n    var payload = {\n      topImage: isThumbnail,\n      thumbnailImage: isThumbnail,\n      newMedia: newMedia,\n      deleteMedia: deleteMedia // duration_days: data.tour_itineraries.length - 1,\n\n    };\n    onEdit(dispatch, payload, token, data.id, onCallback);\n  };\n\n  var onCallback = function onCallback(callback) {\n    if (callback.success) {\n      onClear(dispatch, false, 'Saved Successfully.');\n    } else {\n      onClear(dispatch, false, callback.data.errors[0].message);\n    }\n\n    setTimeout(function () {\n      onClear(dispatch, true, '');\n    }, 5000);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"u-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"u-title u-row space-between\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"Edit Umrah Packages\"), React.createElement(\"div\", {\n    className: \"u-btn\",\n    onClick: function onClick() {\n      return onMode('list');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, \"List Umrah\")), React.createElement(Field, {\n    name: \"Title\",\n    placeholder: \"Example: Umrah Maghfiroh\",\n    value: isTitle,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }), React.createElement(TopImage, {\n    image: isThumbnail,\n    onChange: addThumbnail,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }), React.createElement(FieldAdd, {\n    type: \"date\",\n    name: \"Umrah Date\",\n    placeholder: \"Example: 7\",\n    data: isTripDates,\n    duration: isDuration,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }), React.createElement(Field, {\n    name: \"Cut Off Time\",\n    placeholder: \"Example: 3\",\n    type: \"number\",\n    value: isCoT,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }), React.createElement(Field, {\n    name: \"Quota Person\",\n    placeholder: \"Example: 50\",\n    type: \"number\",\n    value: isQuota,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }), React.createElement(Field, {\n    name: \"Minimum Participants\",\n    placeholder: \"Example: 1\",\n    type: \"number\",\n    value: isMinPax,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }), React.createElement(Field, {\n    type: \"price\",\n    name: \"Price Config\",\n    value: isPriceConfig,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }), React.createElement(Field, {\n    type: \"addon\",\n    name: \"Add On\",\n    value: isAddOn,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }), React.createElement(FieldAdd, {\n    type: \"visited\",\n    name: \"Visited Place\",\n    data: isVisited,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }), React.createElement(DocPicture, {\n    data: isMedia,\n    onChange: onChangeMedia,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }), React.createElement(FieldTextEditor, {\n    name: \"Itinerary\",\n    data: isItinerary,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }), React.createElement(FieldAdd, {\n    type: \"include\",\n    name: \"Include\",\n    data: isInclude,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }), React.createElement(FieldAdd, {\n    name: \"Exclude\",\n    data: isExclude,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }), React.createElement(FieldTextEditor, {\n    name: \"Terms & Conditions\",\n    data: isTerms,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }), React.createElement(FieldTextEditor, {\n    name: \"Cancelation Policy\",\n    data: isPolicy,\n    disable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"u-publish\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, isLoading ? React.createElement(\"div\", {\n    className: \"u-publish-btn\",\n    style: {\n      paddingRight: 115,\n      paddingLeft: 115\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, React.createElement(Loading, {\n    loading: isLoading,\n    color: \"#fff\",\n    type: \"11\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  })) : React.createElement(\"div\", {\n    className: \"u-publish-btn\",\n    onClick: function onClick() {\n      return onSubmit();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239\n    },\n    __self: this\n  }, \"SAVE\")));\n});","map":{"version":3,"sources":["/Users/kitrihapsari/Documents/projects/cmsasitaaja/src/pages/umrah/Edit.js"],"names":["React","useState","useEffect","Field","FieldAdd","FieldTextEditor","TopImage","DocPicture","moment","Loading","props","onEdit","onClear","dispatch","token","isLoading","onMode","data","bh","setBh","isTitle","setTitle","isThumbnail","setThumbnail","isCoT","setCoT","isDuration","setDuration","isQuota","setQuota","isMinPax","setMinPax","isTerms","setTerms","isPolicy","setPolicy","startDate","Date","add","format","endDate","isTripDates","setTripDates","name","isVisited","setVisited","title","isInclude","setInclude","isExclude","setExclude","day","description","facilities","isItinerary","setItinerary","image","isMedia","setMedia","adult_single","adult_twin","adult_triple","adult_quad","adult_double","isPriceConfig","setPriceConfig","visa","full","none","isAddOn","setAddOn","newMedia","setNew","deleteMedia","setDelete","image_thumbnail","cut_of_time","duration_days","tour_trip_dates","quota_person","min_pax","visit_cities","info_included","info_excluded","tour_itineraries","price_config","umrah_addons","terms_conditions","cancellation_policy","map","item","i","media","url","addThumbnail","value","onChangeMedia","field","splice","del","id","push","media_id","concat","getUTCMilliseconds","onSubmit","payload","topImage","thumbnailImage","onCallback","callback","success","errors","message","setTimeout","paddingRight","paddingLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './umrah.css';\nimport Field from './components/Field';\nimport FieldAdd from './components/FieldAdd';\nimport FieldTextEditor from './components/FieldTextEditor';\nimport TopImage from './components/TopImage';\nimport DocPicture from './components/DocPicture';\nimport moment from 'moment';\nimport Loading from '../../component/Loading';\n\nexport default (props) => {\n  // Props\n  const { onEdit, onClear, dispatch, token, isLoading, onMode, data } = props;\n\n  // State\n  const [bh, setBh] = useState('')\n  const [isTitle, setTitle] = useState('')\n  const [isThumbnail, setThumbnail] = useState('')\n  const [isCoT, setCoT] = useState('')\n  const [isDuration, setDuration] = useState('')\n  const [isQuota, setQuota] = useState('')\n  const [isMinPax, setMinPax] = useState('')\n  const [isTerms, setTerms] = useState('')\n  const [isPolicy, setPolicy] = useState('')\n  const [isTripDates, setTripDates] = useState([\n    {\n      startDate: moment(new Date).add(7, 'days').format('YYYY-MM-DD'),\n      endDate: moment(new Date).add(10, 'days').format('YYYY-MM-DD')\n    }\n  ]);\n  const [isVisited, setVisited] = useState([{ name: '' }]);\n  const [isInclude, setInclude] = useState([{ title: '' }]);\n  const [isExclude, setExclude] = useState([{ title: '' }]);\n  const [isItinerary, setItinerary] = useState([{\n    day: 1,\n    title: \"\",\n    description: \"\",\n    facilities: []\n  }]);\n  const [isMedia, setMedia] = useState([\n    { title: \"\", image: \"\" },\n    { title: \"\", image: \"\" },\n    { title: \"\", image: \"\" },\n    { title: \"\", image: \"\" },\n    { title: \"\", image: \"\" }\n  ]);\n  const [isPriceConfig, setPriceConfig] = useState([\n    { adult_single: 0 },\n    { adult_twin: 0 },\n    { adult_triple: 0 },\n    { adult_quad: 0 },\n    { adult_double: 0 },\n  ]);\n  const [isAddOn, setAddOn] = useState({\n    visa: 0,\n    full: 0,\n    none: 0,\n  });\n  const [newMedia, setNew] = useState([])\n  const [deleteMedia, setDelete] = useState([])\n\n  // Lifecycle\n  useEffect(() => {\n    setTitle(data && data.title)\n    setThumbnail(data && data.image_thumbnail)\n    setCoT(data && data.cut_of_time)\n    setDuration(data && data.duration_days)\n    setQuota(data && data.tour_trip_dates[0].quota_person)\n    setMinPax(data && data.min_pax)\n    setTripDates(data && data.tour_trip_dates)\n    setVisited(data && data.visit_cities)\n    setInclude(data && data.info_included)\n    setExclude(data && data.info_excluded)\n    setItinerary(data && data.tour_itineraries)\n    setPriceConfig(data && data.price_config)\n    setAddOn(data && data.umrah_addons[0])\n    setPriceConfig(data && data.price_config)\n    setTerms(data && data.terms_conditions[0])\n    setPolicy(data && data.cancellation_policy[0])\n    isMedia.map((item, i) => {\n      item.title = data && data.media && data.media[i] ? data.media[i].title : '';\n      item.image = data && data.media && data.media[i] ? data.media[i].url : '';\n      return item;\n    })\n  }, [data])\n\n  // Function Add\n  const addThumbnail = (value) => {\n    setThumbnail(value)\n  }\n\n  // Function Change Text\n  const onChangeMedia = (value, field, i) => {\n    if (field === 'image') {\n      if (value === '') {\n        newMedia.splice(i - 1, 1);\n        let del = [];\n        if (data.media && data.media[i] && data.media[i].id) {\n          del.push({ media_id: data.media[i].id });\n          setDelete(deleteMedia.concat(del));\n        }\n      } else {\n        let add = [];\n        add.push({ title: '', image: field === 'image' ? value : '' })\n        setNew(newMedia.concat(add))\n      }\n    }\n    isMedia[i][field] = value;\n    // newMedia[][field] = value;\n    setBh(new Date().getUTCMilliseconds())\n  }\n\n  // Function Submit\n  // Payloadnya disesuaikan dengan swagger/postman\n  const onSubmit = () => {\n    let payload = {\n      topImage: isThumbnail,\n      thumbnailImage: isThumbnail,\n      newMedia,\n      deleteMedia,\n      // duration_days: data.tour_itineraries.length - 1,\n    }\n    onEdit(dispatch, payload, token, data.id, onCallback);\n  }\n  const onCallback = (callback) => {\n    if (callback.success) {\n      onClear(dispatch, false, 'Saved Successfully.')\n    } else {\n      onClear(dispatch, false, callback.data.errors[0].message)\n    }\n    setTimeout(() => {\n      onClear(dispatch, true, '')\n    }, 5000);\n  }\n\n  return (\n    <div className=\"u-wrapper\">\n      <div className=\"u-title u-row space-between\">\n        <div>Edit Umrah Packages</div>\n        <div className=\"u-btn\" onClick={() => onMode('list')}>List Umrah</div>\n      </div>\n      <Field\n        name=\"Title\"\n        placeholder=\"Example: Umrah Maghfiroh\"\n        value={isTitle}\n        disable={true}\n      />\n      <TopImage\n        image={isThumbnail}\n        onChange={addThumbnail}\n      />\n      <FieldAdd\n        type=\"date\"\n        name=\"Umrah Date\"\n        placeholder=\"Example: 7\"\n        data={isTripDates}\n        duration={isDuration}\n        disable={true}\n      />\n      <Field\n        name=\"Cut Off Time\"\n        placeholder=\"Example: 3\"\n        type=\"number\"\n        value={isCoT}\n        disable={true}\n      />\n      <Field\n        name=\"Quota Person\"\n        placeholder=\"Example: 50\"\n        type=\"number\"\n        value={isQuota}\n        disable={true}\n      />\n      <Field\n        name=\"Minimum Participants\"\n        placeholder=\"Example: 1\"\n        type=\"number\"\n        value={isMinPax}\n        disable={true}\n      />\n      <Field\n        type=\"price\"\n        name=\"Price Config\"\n        value={isPriceConfig}\n        disable={true}\n      />\n      <Field\n        type=\"addon\"\n        name=\"Add On\"\n        value={isAddOn}\n        disable={true}\n      />\n      <FieldAdd\n        type=\"visited\"\n        name=\"Visited Place\"\n        data={isVisited}\n        disable={true}\n      />\n      <DocPicture\n        data={isMedia}\n        onChange={onChangeMedia}\n      />\n      <FieldTextEditor\n        name=\"Itinerary\"\n        data={isItinerary}\n        disable={true}\n      />\n      <FieldAdd\n        type=\"include\"\n        name=\"Include\"\n        data={isInclude}\n        disable={true}\n      />\n      <FieldAdd\n        name=\"Exclude\"\n        data={isExclude}\n        disable={true}\n      />\n      <FieldTextEditor\n        name=\"Terms & Conditions\"\n        data={isTerms}\n        disable={true}\n      />\n      <FieldTextEditor\n        name=\"Cancelation Policy\"\n        data={isPolicy}\n        disable={true}\n      />\n      <div className=\"u-publish\">\n        {isLoading ?\n          <div className=\"u-publish-btn\" style={{ paddingRight: 115, paddingLeft: 115 }}>\n            <Loading\n              loading={isLoading}\n              color=\"#fff\"\n              type=\"11\"\n            />\n          </div>\n          :\n          <div className=\"u-publish-btn\" onClick={() => onSubmit()}>\n            SAVE\n        </div>\n        }\n      </div>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}