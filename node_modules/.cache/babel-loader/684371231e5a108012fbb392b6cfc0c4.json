{"ast":null,"code":"import _classCallCheck from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/kitrihapsari/Documents/React/cmsasitaaja/src/pages/report/Component.js\";\nimport React from \"react\";\nimport { Row } from \"reactstrap\";\nimport SubHeader from \"../../component/sub-header\";\nimport PaginationRemote from '../../component/PaginationRemote';\nimport { formatRupiah } from '../../utilities/helpers';\n\nvar DataUser =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(DataUser, _React$PureComponent);\n\n  function DataUser(props) {\n    var _this;\n\n    _classCallCheck(this, DataUser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DataUser).call(this, props));\n\n    _this.handleTableChange = function (type, _ref) {\n      var page = _ref.page,\n          sizePerPage = _ref.sizePerPage;\n      var params = _this.state.params;\n      params.page = page;\n      params.sizePerPage = sizePerPage;\n\n      _this.loadDataListReport(params.q, params.page, params.limit, params.limitPage);\n\n      _this.setState({\n        params: params\n      });\n    };\n\n    _this.indexList = 0;\n    _this.columns = [{\n      dataField: \"index\",\n      text: \"No\",\n      headerStyle: {\n        width: \"5%\"\n      }\n    }, {\n      dataField: \"booking_code\",\n      text: \"BOOKER\",\n      headerStyle: {\n        width: \"15%\"\n      }\n    }, {\n      dataField: \"year\",\n      text: \"YEAR\",\n      headerStyle: {\n        width: \"10%\"\n      }\n    }, {\n      dataField: \"date\",\n      text: \"TRX DATE\",\n      headerStyle: {\n        width: \"20%\"\n      }\n    }, {\n      dataField: \"customer_name\",\n      text: \"PASSANGER NAME\",\n      headerStyle: {\n        width: \"25%\"\n      }\n    }, {\n      dataField: \"total_amount\",\n      text: \"AMOUNT\",\n      headerStyle: {\n        width: \"25%\"\n      },\n      formatter: function formatter(id, row) {\n        return formatRupiah(!row ? 0 : !row.total_amount ? 0 : row.total_amount);\n      }\n    }, {\n      dataField: \"status\",\n      text: \"STATUS\",\n      headerStyle: {\n        width: \"10%\",\n        textAlign: 'center'\n      },\n      formatter: _this.renderStatusFlight.bind(_assertThisInitialized(_assertThisInitialized(_this)))\n    }];\n    _this.reloadDataReport = false;\n    _this.state = {\n      modalOrder: false,\n      search: \"\",\n      params: {\n        q: '',\n        page: 1,\n        limit: 20,\n        sizePerPage: 20,\n        totalSize: 200\n      },\n      selectDetail: null,\n      data: [],\n      mobile: false\n    };\n    return _this;\n  }\n\n  _createClass(DataUser, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.handleResetReportAction();\n      var _this$state$params = this.state.params,\n          q = _this$state$params.q,\n          page = _this$state$params.page,\n          limit = _this$state$params.limit;\n      this.loadDataListReport(q, page, limit);\n      this.downloadData();\n\n      if (window.screen.availWidth < 756) {\n        this.setState({\n          mobile: true\n        });\n      } else {\n        this.setState({\n          mobile: false\n        });\n      }\n    }\n  }, {\n    key: \"handleResetReportAction\",\n    value: function handleResetReportAction() {\n      var dispatch = this.props.dispatch;\n      var resetReportAction = this.props.actions.resetReportAction;\n      resetReportAction(dispatch);\n    }\n  }, {\n    key: \"loadDataListReport\",\n    value: function loadDataListReport(query, page, limit) {\n      var dispatch = this.props.dispatch;\n      var params = {\n        q: query,\n        page: page,\n        limit: limit\n      };\n      var reportAction = this.props.actions.reportAction; // let token = !this.props.login ? '' : this.login.token;\n\n      reportAction(dispatch, params);\n    }\n  }, {\n    key: \"handleInputSearch\",\n    value: function handleInputSearch(index) {\n      var data = this.state.data;\n      var setSearching = this.props.actionCommon.setSearching;\n      var dataPost = {\n        products: data[index].booking\n      };\n      setSearching(dataPost);\n    }\n  }, {\n    key: \"handleChangeSearch\",\n    value: function handleChangeSearch(value) {\n      var params = this.state.params;\n      params.q = value;\n      this.setState({\n        params: params\n      });\n      this.loadDataListReport(params.q, params.page, params.limit, params.limitPage);\n    }\n  }, {\n    key: \"downloadData\",\n    value: function downloadData() {\n      var dispatch = this.props.dispatch;\n      var params = {\n        q: '',\n        page: 1,\n        limit: !this.props.report.meta ? 20 : this.props.report.meta.total\n      };\n      var loadAllReport = this.props.actions.loadAllReport;\n      var token = !this.props.login.token ? '' : this.props.login.token;\n      loadAllReport(dispatch, params, token);\n    }\n  }, {\n    key: \"renderStatusFlight\",\n    value: function renderStatusFlight(id, row) {\n      // let dataListReport = this.props.report.dataListAllReport==null ? [] : this.props.report.dataListAllReport;\n      // let filterData = dataListReport.filter(dataListReport => dataListReport.status == \"PAID\")\n      // let dataPaid = filterData==null ? false : true\n      return React.createElement(\"div\", {\n        className: (!row ? '' : !row.status ? '' : row.status).toLowerCase(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, !row ? '' : !row.status ? '' : row.status);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          params = _this$state.params,\n          mobile = _this$state.mobile;\n      var _this$props$report$me = this.props.report.meta,\n          meta = _this$props$report$me === void 0 ? {\n        total: 1\n      } : _this$props$report$me;\n      var fetchingListReport = this.props.report.fetchingListReport;\n      var dataListReport = this.props.report.dataListAllReport == null ? [] : this.props.report.dataListAllReport;\n      var filterData = dataListReport.filter(function (dataListReport) {\n        return dataListReport.status == \"PAID\";\n      });\n      var dataViewListReport = this.props.report.dataListReport == null ? [] : this.props.report.dataListReport;\n      var index = 0;\n      var no = 0;\n      dataViewListReport.map(function (obj, i) {\n        index++;\n        obj.index = params.page === 1 ? index : index + Number(params.page * params.sizePerPage) - 20;\n      });\n      filterData.map(function (obj, i) {\n        no++;\n        obj.index = no;\n      });\n      return React.createElement(\"div\", {\n        className: \"section-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"search-flight-heading bot\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \" Report \"), React.createElement(Row, {\n        className: \"step-form-table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(SubHeader, {\n        title: \"Report\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-search\",\n        style: mobile ? {\n          overflow: \"scroll\",\n          width: window.innerWidth - 20\n        } : {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(PaginationRemote, {\n        tableReport: true,\n        download: filterData == null ? false : true,\n        loading: fetchingListReport,\n        searchPlaceholder: \"Search in Here\",\n        handleChangeSearch: this.handleChangeSearch.bind(this),\n        searchValue: params.q,\n        dataexport: filterData,\n        data: dataViewListReport,\n        columns: this.columns,\n        page: params.page,\n        sizePerPage: params.sizePerPage,\n        totalSize: !meta ? 1 : meta.total,\n        onTableChange: this.handleTableChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return DataUser;\n}(React.PureComponent);\n\nexport { DataUser as default };","map":{"version":3,"sources":["/Users/kitrihapsari/Documents/React/cmsasitaaja/src/pages/report/Component.js"],"names":["React","Row","SubHeader","PaginationRemote","formatRupiah","DataUser","props","handleTableChange","type","page","sizePerPage","params","state","loadDataListReport","q","limit","limitPage","setState","indexList","columns","dataField","text","headerStyle","width","formatter","id","row","total_amount","textAlign","renderStatusFlight","bind","reloadDataReport","modalOrder","search","totalSize","selectDetail","data","mobile","handleResetReportAction","downloadData","window","screen","availWidth","dispatch","resetReportAction","actions","query","reportAction","index","setSearching","actionCommon","dataPost","products","booking","value","report","meta","total","loadAllReport","token","login","status","toLowerCase","fetchingListReport","dataListReport","dataListAllReport","filterData","filter","dataViewListReport","no","map","obj","i","Number","overflow","innerWidth","handleChangeSearch","PureComponent"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Row } from \"reactstrap\";\nimport SubHeader from \"../../component/sub-header\";\nimport PaginationRemote from '../../component/PaginationRemote'\nimport { formatRupiah } from '../../utilities/helpers';\n\nexport default class DataUser extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalOrder: false,\n      search: \"\",\n      params: {\n        q: '',\n        page: 1,\n        limit: 20,\n        sizePerPage: 20,\n        totalSize: 200\n      },\n      selectDetail: null,\n      data: [],\n      mobile: false\n    };\n  }\n\n  componentWillMount() {\n    this.handleResetReportAction();\n    const { q, page, limit } = this.state.params;\n    this.loadDataListReport(q, page, limit)\n    this.downloadData()\n    if (window.screen.availWidth < 756) {\n      this.setState({ mobile: true })\n    } else {\n      this.setState({ mobile: false })\n    }\n  }\n\n  handleResetReportAction() {\n    const { dispatch } = this.props;\n    const { resetReportAction } = this.props.actions;\n    resetReportAction(dispatch)\n  }\n  loadDataListReport(query, page, limit) {\n    const { dispatch } = this.props;\n    let params = {\n      q: query,\n      page: page,\n      limit: limit,\n    }\n    const { reportAction } = this.props.actions;\n    // let token = !this.props.login ? '' : this.login.token;\n    reportAction(dispatch, params)\n  }\n  handleInputSearch(index) {\n    const { data } = this.state;\n    const { setSearching } = this.props.actionCommon\n    let dataPost = {\n      products: data[index].booking\n    }\n    setSearching(dataPost);\n  }\n  handleTableChange = (type, { page, sizePerPage }) => {\n    let { params } = this.state;\n    params.page = page;\n    params.sizePerPage = sizePerPage;\n    this.loadDataListReport(params.q, params.page, params.limit, params.limitPage)\n    this.setState({ params: params });\n  }\n  handleChangeSearch(value) {\n    let { params } = this.state\n    params.q = value\n    this.setState({ params });\n    this.loadDataListReport(params.q, params.page, params.limit, params.limitPage)\n  }\n  downloadData() {\n    const { dispatch } = this.props;\n    let params = {\n      q: '',\n      page: 1,\n      limit: !this.props.report.meta ? 20 : this.props.report.meta.total\n    }\n    const { loadAllReport } = this.props.actions;\n    let token = !this.props.login.token ? '' : this.props.login.token;\n    loadAllReport(dispatch, params, token);\n  }\n  renderStatusFlight(id, row) {\n    // let dataListReport = this.props.report.dataListAllReport==null ? [] : this.props.report.dataListAllReport;\n    // let filterData = dataListReport.filter(dataListReport => dataListReport.status == \"PAID\")\n    // let dataPaid = filterData==null ? false : true\n    return (\n      <div className={(!row ? '' : !row.status ? '' : row.status).toLowerCase()}>{!row ? '' : !row.status ? '' : row.status}</div>\n    );\n  }\n\n  indexList = 0;\n  columns = [\n    { dataField: \"index\", text: \"No\", headerStyle: { width: \"5%\" } },\n    { dataField: \"booking_code\", text: \"BOOKER\", headerStyle: { width: \"15%\" } },\n    { dataField: \"year\", text: \"YEAR\", headerStyle: { width: \"10%\" } },\n    { dataField: \"date\", text: \"TRX DATE\", headerStyle: { width: \"20%\" } },\n    { dataField: \"customer_name\", text: \"PASSANGER NAME\", headerStyle: { width: \"25%\" } },\n    { dataField: \"total_amount\", text: \"AMOUNT\", headerStyle: { width: \"25%\" }, formatter: (id, row) => formatRupiah(!row ? 0 : !row.total_amount ? 0 : row.total_amount) },\n    { dataField: \"status\", text: \"STATUS\", headerStyle: { width: \"10%\", textAlign: 'center' }, formatter: this.renderStatusFlight.bind(this) },\n  ]\n  reloadDataReport = false;\n\n  render() {\n    const { params, mobile } = this.state;\n    const { meta = { total: 1 } } = this.props.report;\n    const { fetchingListReport } = this.props.report;\n    let dataListReport = this.props.report.dataListAllReport == null ? [] : this.props.report.dataListAllReport;\n    let filterData = dataListReport.filter(dataListReport => dataListReport.status == \"PAID\")\n    let dataViewListReport = this.props.report.dataListReport == null ? [] : this.props.report.dataListReport;\n    let index = 0;\n    let no = 0;\n    dataViewListReport.map((obj, i) => {\n      index++;\n      obj.index = params.page === 1 ? index : index + Number(params.page * params.sizePerPage) - 20;\n    })\n    filterData.map((obj, i) => {\n      no++;\n      obj.index = no;\n    })\n    return (\n      <div className=\"section-search\">\n        <Row className=\"search-flight-heading bot\"> Report </Row>\n        <Row className=\"step-form-table\">\n          <div style={{ width: \"100%\" }}>\n            <SubHeader title={\"Report\"} />\n            <div className=\"form-search\" style={mobile ? { overflow: \"scroll\", width: window.innerWidth - 20 } : {}}>\n              <PaginationRemote tableReport={true}\n                download={filterData == null ? false : true}\n                loading={fetchingListReport}\n                searchPlaceholder=\"Search in Here\"\n                handleChangeSearch={this.handleChangeSearch.bind(this)}\n                searchValue={params.q}\n                dataexport={filterData}\n                data={dataViewListReport}\n                columns={this.columns}\n                page={params.page}\n                sizePerPage={params.sizePerPage}\n                totalSize={!meta ? 1 : meta.total}\n                onTableChange={this.handleTableChange}\n              />\n            </div>\n          </div>\n        </Row>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}