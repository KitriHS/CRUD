{"ast":null,"code":"import _defineProperty from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/kitrihapsari/Documents/React/cmsasitaaja/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/kitrihapsari/Documents/React/cmsasitaaja/src/pages/agents/Component.js\";\nimport React from \"react\";\nimport { Row } from \"reactstrap\";\nimport SubHeader from \"../../component/sub-header\";\nimport PaginationRemote from './../../component/PaginationRemote/Component';\nimport moment from \"moment\";\nimport Loading from '../../component/Loading/index';\nimport { select } from \"redux-saga/effects\";\n\nvar Agent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Agent, _React$Component);\n\n  function Agent(props) {\n    var _this;\n\n    _classCallCheck(this, Agent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Agent).call(this, props));\n\n    _this.handleTableChange = function (type, _ref) {\n      var page = _ref.page,\n          sizePerPage = _ref.sizePerPage;\n      var params = _this.state.params;\n      params.page = page;\n      params.sizePerPage = sizePerPage;\n\n      _this.loadDataListAgentSub(params.q, params.page, params.limit, params.parent_id, params.is_agent);\n\n      _this.setState({\n        params: params\n      });\n    };\n\n    _this.index = 0;\n    _this.columns = [{\n      dataField: \"index\",\n      text: \"NO\",\n      headerStyle: {\n        width: \"5%\"\n      }\n    }, {\n      dataField: \"agentCode\",\n      text: \"ID AGENT\",\n      headerStyle: {\n        width: \"10%\"\n      }\n    }, {\n      dataField: \"mobileNo\",\n      text: \"PHONE AGENT\",\n      headerStyle: {\n        width: \"15%\"\n      }\n    }, {\n      dataField: \"fullname\",\n      text: \"AGENT\",\n      headerStyle: {\n        width: \"20%\"\n      }\n    }, {\n      dataField: \"parentAgent\",\n      text: \"SUB AGENT\",\n      headerStyle: {\n        width: \"20%\"\n      },\n      formatter: _this.handleSubAgent.bind(_assertThisInitialized(_assertThisInitialized(_this)))\n    }, {\n      dataField: \"createdAt\",\n      text: \"DATE CREATE\",\n      headerStyle: {\n        width: \"15%\"\n      },\n      formatter: function formatter(id, row) {\n        return moment(row.createdAt).format(\"DD-MM-YYYY\");\n      }\n    }];\n    _this.state = _defineProperty({\n      mobile: false,\n      fetchingListAgent: true,\n      params: {\n        q: '',\n        page: 1,\n        limit: 20,\n        sizePerPage: 20,\n        totalSize: 200,\n        parent_id: '',\n        is_agent: true\n      },\n      search: \"\"\n    }, \"mobile\", false);\n    return _this;\n  }\n\n  _createClass(Agent, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this$state$params = this.state.params,\n          q = _this$state$params.q,\n          page = _this$state$params.page,\n          limit = _this$state$params.limit,\n          parent_id = _this$state$params.parent_id,\n          is_agent = _this$state$params.is_agent;\n      this.loadDataListAgentSub(q, page, limit, parent_id, is_agent);\n    }\n  }, {\n    key: \"handleResetListAgentSub\",\n    value: function handleResetListAgentSub() {\n      var dispatch = this.props.dispatch;\n      var resetAllListAgentSubAction = this.props.actions.resetAllListAgentSubAction;\n      resetAllListAgentSubAction(dispatch);\n    }\n  }, {\n    key: \"loadDataListAgentSub\",\n    value: function loadDataListAgentSub(query, page, limit, parent_id) {\n      var is_agent = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var dispatch = this.props.dispatch;\n      var params = {\n        q: query,\n        page: page,\n        limit: limit,\n        parent_id: parent_id,\n        is_agent: is_agent\n      };\n      var listAgentSubAction = this.props.actions.listAgentSubAction;\n      listAgentSubAction(dispatch, params);\n    }\n  }, {\n    key: \"handleSubAgent\",\n    value: function handleSubAgent(row) {\n      var dataListAllCustomers = this.props.customers.dataListAllCustomers;\n      var dataListSubAgent = this.props.customers.dataListAllCustomers == null ? [] : this.props.customers.dataListAllCustomers;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, dataListSubAgent === null ? '-' : !dataListAllCustomers.email ? '-' : dataListAllCustomers.email);\n    } //SEARCHING\n\n  }, {\n    key: \"handleChangeSearch\",\n    value: function handleChangeSearch(value) {\n      var params = this.state.params;\n      params.q = value;\n      this.setState({\n        params: params\n      });\n      this.loadDataListAgentSub(params.q, params.page, params.limit, params.parent_id, params.is_agent);\n    }\n  }, {\n    key: \"handleResetListAgentSub\",\n    value: function handleResetListAgentSub() {\n      var dispatch = this.props.dispatch;\n      var resetAllListAgentSubAction = this.props.actions.resetAllListAgentSubAction;\n      resetAllListAgentSubAction(dispatch);\n    } //SHOW TABLE\n\n  }, {\n    key: \"renderLoading\",\n    value: function renderLoading() {\n      return React.createElement(\"div\", {\n        className: \"box-loading\",\n        style: {\n          marginTop: 50,\n          marginBottom: 50\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Loading, {\n        type: \"PulseLoader\",\n        loading: true,\n        color: '#008c9a',\n        size: 25,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          mobile = _this$state2.mobile,\n          params = _this$state2.params;\n      var fetchingListAgentSub = this.props.listdataagentsub.fetchingListAgentSub;\n      var _this$props$listdataa = this.props.listdataagentsub.meta,\n          meta = _this$props$listdataa === void 0 ? {\n        total: 1\n      } : _this$props$listdataa;\n      var index = 0;\n      var no = 0; // let dataViewAgentSub =  this.props.listdataagentsub.dataSubAgent == null ? [] : this.props.listdataagentsub.dataSubAgent;\n\n      var dataViewAllAgentSub = this.props.listdataagentsub.dataAgent == null ? [] : this.props.listdataagentsub.dataAgent;\n      dataViewAllAgentSub.map(function (obj, i) {\n        index++;\n        obj.index = params === 1 ? index : index + Number(params.page * params.sizePerPage) - 20;\n      }); // dataViewAgentSub.map((obj,i) => {\n      //   no++;\n      //   obj.index =  no;\n      // })\n\n      return React.createElement(\"div\", {\n        className: \"section-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"search-flight-heading bot\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"List Data Agent & Sub Agent\"), React.createElement(Row, {\n        className: \"step-form-table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(SubHeader, {\n        title: \"List Data Agents & Sub Agents\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-search\",\n        style: mobile ? {\n          overflow: \"scroll\",\n          width: window.innerWidth - 20\n        } : {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(PaginationRemote, {\n        tableCustomers: true,\n        searchPlaceholder: \"Search by name\",\n        loading: fetchingListAgentSub,\n        handleChangeSearch: this.handleChangeSearch.bind(this),\n        searchValue: params.q,\n        data: dataViewAllAgentSub,\n        columns: this.columns,\n        page: params.page,\n        sizePerPage: params.sizePerPage,\n        totalSize: !meta ? 1 : meta.total,\n        onTableChange: this.handleTableChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Agent;\n}(React.Component);\n\nexport { Agent as default };","map":{"version":3,"sources":["/Users/kitrihapsari/Documents/React/cmsasitaaja/src/pages/agents/Component.js"],"names":["React","Row","SubHeader","PaginationRemote","moment","Loading","select","Agent","props","handleTableChange","type","page","sizePerPage","params","state","loadDataListAgentSub","q","limit","parent_id","is_agent","setState","index","columns","dataField","text","headerStyle","width","formatter","handleSubAgent","bind","id","row","createdAt","format","mobile","fetchingListAgent","totalSize","search","dispatch","resetAllListAgentSubAction","actions","query","listAgentSubAction","dataListAllCustomers","customers","dataListSubAgent","email","value","marginTop","marginBottom","fetchingListAgentSub","listdataagentsub","meta","total","no","dataViewAllAgentSub","dataAgent","map","obj","i","Number","overflow","window","innerWidth","handleChangeSearch","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Row } from \"reactstrap\";\nimport SubHeader from \"../../component/sub-header\";\nimport PaginationRemote from './../../component/PaginationRemote/Component';\nimport moment from \"moment\";\nimport Loading from '../../component/Loading/index'\nimport { select } from \"redux-saga/effects\";\n\nexport default class Agent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mobile: false,\n      fetchingListAgent: true,\n      params: {\n        q: '',\n        page: 1,\n        limit: 20,\n        sizePerPage: 20,\n        totalSize: 200,\n        parent_id: '',\n        is_agent: true,\n      },\n      search: \"\",\n      mobile: false,\n    }\n  }\n\n  componentWillMount() {\n    const { q, page, limit, parent_id, is_agent } = this.state.params;\n    this.loadDataListAgentSub(q, page, limit, parent_id, is_agent)\n  }\n  handleResetListAgentSub() {\n    const { dispatch } = this.props;\n    const { resetAllListAgentSubAction } = this.props.actions;\n    resetAllListAgentSubAction(dispatch)\n  }\n  loadDataListAgentSub(query, page, limit, parent_id, is_agent = true) {\n    const { dispatch } = this.props;\n    let params = {\n      q: query,\n      page: page,\n      limit: limit,\n      parent_id: parent_id,\n      is_agent: is_agent,\n    }\n    const { listAgentSubAction } = this.props.actions;\n    listAgentSubAction(dispatch, params)\n  }\n  handleSubAgent(row) {\n    const { dataListAllCustomers } = this.props.customers;\n    let dataListSubAgent = this.props.customers.dataListAllCustomers == null ? [] : this.props.customers.dataListAllCustomers;\n    return (\n      <div>{dataListSubAgent === null ? '-' : !dataListAllCustomers.email ? '-' : dataListAllCustomers.email}</div>\n    )\n  }\n  //SEARCHING\n  handleChangeSearch(value) {\n    let { params } = this.state;\n    params.q = value;\n    this.setState({ params });\n    this.loadDataListAgentSub(params.q, params.page, params.limit, params.parent_id, params.is_agent);\n  }\n  handleTableChange = (type, { page, sizePerPage }) => {\n    let { params } = this.state;\n    params.page = page;\n    params.sizePerPage = sizePerPage;\n    this.loadDataListAgentSub(params.q, params.page, params.limit, params.parent_id, params.is_agent);\n    this.setState({ params: params })\n  }\n  handleResetListAgentSub() {\n    const { dispatch } = this.props;\n    const { resetAllListAgentSubAction } = this.props.actions;\n    resetAllListAgentSubAction(dispatch)\n  }\n  //SHOW TABLE\n  index = 0\n  columns = [\n    { dataField: \"index\", text: \"NO\", headerStyle: { width: \"5%\" } },\n    { dataField: \"agentCode\", text: \"ID AGENT\", headerStyle: { width: \"10%\" } },\n    { dataField: \"mobileNo\", text: \"PHONE AGENT\", headerStyle: { width: \"15%\" } },\n    { dataField: \"fullname\", text: \"AGENT\", headerStyle: { width: \"20%\" } },\n    { dataField: \"parentAgent\", text: \"SUB AGENT\", headerStyle: { width: \"20%\" }, formatter: this.handleSubAgent.bind(this) },\n    { dataField: \"createdAt\", text: \"DATE CREATE\", headerStyle: { width: \"15%\" }, formatter: (id, row) => moment(row.createdAt).format(\"DD-MM-YYYY\") },\n  ];\n\n  renderLoading() {\n    return (\n      <div className=\"box-loading\" style={{ marginTop: 50, marginBottom: 50 }}>\n        <Loading\n          type=\"PulseLoader\"\n          loading={true}\n          color={'#008c9a'}\n          size={25}\n        />\n      </div>\n    )\n  }\n\n  render() {\n    const { mobile, params } = this.state\n    const { fetchingListAgentSub } = this.props.listdataagentsub\n    const { meta = { total: 1 } } = this.props.listdataagentsub;\n    let index = 0;\n    let no = 0\n    // let dataViewAgentSub =  this.props.listdataagentsub.dataSubAgent == null ? [] : this.props.listdataagentsub.dataSubAgent;\n    let dataViewAllAgentSub = this.props.listdataagentsub.dataAgent == null ? [] : this.props.listdataagentsub.dataAgent;\n    dataViewAllAgentSub.map((obj, i) => {\n      index++;\n      obj.index = params === 1 ? index : index + Number(params.page * params.sizePerPage) - 20;\n    })\n    // dataViewAgentSub.map((obj,i) => {\n    //   no++;\n    //   obj.index =  no;\n    // })\n    return (\n      <div className=\"section-search\">\n        <Row className=\"search-flight-heading bot\">List Data Agent & Sub Agent</Row>\n        <Row className=\"step-form-table\">\n          <div style={{ width: \"100%\" }}>\n            <SubHeader title={\"List Data Agents & Sub Agents\"} />\n            <div className=\"form-search\" style={mobile ? { overflow: \"scroll\", width: window.innerWidth - 20 } : {}}>\n              <PaginationRemote tableCustomers={true}\n                searchPlaceholder=\"Search by name\"\n                loading={fetchingListAgentSub}\n                handleChangeSearch={this.handleChangeSearch.bind(this)}\n                searchValue={params.q}\n                data={dataViewAllAgentSub}\n                columns={this.columns}\n                page={params.page}\n                sizePerPage={params.sizePerPage}\n                totalSize={!meta ? 1 : meta.total}\n                onTableChange={this.handleTableChange}\n              />\n            </div>\n          </div>\n        </Row>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}